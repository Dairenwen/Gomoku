<html>
    <head>
        <meta charset='utf-8'>
        <title>index</title>
    </head>
    <body>
        <h1>HELLO WORLD</h1>
        <p>ç¬¬ä¸€æ®µ</p>
        <style>
            p{
                color:blue;
            }
        </style>
        <p>ç¬¬äºŒè¡Œ<br/>ç¬¬ä¸‰è¡Œ</p>
        <img src='D:\åŸç¥å£çº¸\15053637251009856.png' title="02"/><br/>
        <a href="https://blog.csdn.net/Dai_renwen" target="_self">æˆ‘çš„ä¸»é¡µ</a><br/>
        <ul>
            <li>æ— åºåˆ—è¡¨é¡¹</li>
        </ul>
        <br/>
        <ol>
            <li>æœ‰åºåˆ—è¡¨é¡¹</li>
        </ol>

        <dl>
            <dt>åˆ†ç±»1</dt>
            <dd>åˆ†ç±»é¡¹1</dd>
            <dd>åˆ†ç±»é¡¹1</dd>
        </dl>

        <form action='http://124.222.53.34:8080/index.html' method='post'>
            <input type='text' id='username' name='username'>
            <input type='password' id='password' name='password'>
            <input type='submit' name='submit' value='æäº¤'>
        </form>

        <button onclick='test()'>æŒ‰é’®</button>
        <div>ç‹¬å ä¸€è¡Œ</div>
        <div>ç‹¬å ä¸€è¡Œ</div>
        <span>å¤šè¡Œ</span>
        <span>å¤šè¡Œ</span>

      
        <div id="log" style="margin-top: 20px; color: #666;"></div> <!-- æ–°å¢æ—¥å¿—æ˜¾ç¤ºåŒº -->

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js">
        </script>
        <script>
            const WS_URL = "ws://124.222.53.34:8080";
            var websocket = new WebSocket(WS_URL);
            // è¾…åŠ©å‡½æ•°ï¼šæ·»åŠ æ—¥å¿—åˆ°é¡µé¢ï¼ˆæ–¹ä¾¿æŸ¥çœ‹å†å²è®°å½•ï¼Œæ›¿ä»£å•çº¯ alertï¼‰
            function addLog(content, type = "info") {
                const logDiv = document.getElementById("log");
                const logItem = document.createElement("div");
                logItem.style.color = type === "error" ? "#ff4444" : (type === "success" ? "#00C851" : "#333");
                logItem.innerText = `[${new Date().toLocaleTimeString()}] ${content}`;
                logDiv.appendChild(logItem);
                // æ»šåŠ¨åˆ°æœ€æ–°æ—¥å¿—
                logDiv.scrollTop = logDiv.scrollHeight;
            }

            // 2. è¿æ¥æˆåŠŸï¼šç”¨æ—¥å¿—æ›¿ä»£ alertï¼Œé¿å…å¼¹çª—å¹²æ‰°
            websocket.onopen = function() {
                addLog("âœ… WebSocket è¿æ¥å·²å»ºç«‹ï¼", "success");
            };

            // 3. æ¥æ”¶æ¶ˆæ¯ï¼šæ˜¾ç¤ºåˆ°é¡µé¢æ—¥å¿—ï¼Œè€Œéä»… alert
            websocket.onmessage = function(e) {
                addLog(`ğŸ“¥ æ”¶åˆ°æœåŠ¡å™¨æ¶ˆæ¯ï¼š${e.data}`, "success");
                // å¯é€‰ï¼šä¿ç•™ alert æé†’ï¼ˆå¦‚éœ€å¯å–æ¶ˆæ³¨é‡Šï¼‰
                // alert("æ”¶åˆ°æœåŠ¡å™¨æ¶ˆæ¯: " + e.data);
            };

            // 4. å…³é”®ä¿®æ”¹ï¼šé”™è¯¯å¤„ç†å¢åŠ è¯¦ç»†ä¿¡æ¯ï¼ˆåŸæ–‡ä»¶æ— å…·ä½“é”™è¯¯å†…å®¹ï¼Œéš¾è°ƒè¯•ï¼‰
            websocket.onerror = function(event) {
                const errorMsg = event.message || "æœªçŸ¥é”™è¯¯ï¼ˆå¯èƒ½æ˜¯è·¨åŸŸã€ç«¯å£ä¸åŒ¹é…æˆ–æœåŠ¡å™¨æœªå¯åŠ¨ï¼‰";
                addLog(`âŒ è¿æ¥å¼‚å¸¸ï¼š${errorMsg}`, "error");
                alert(`è¿æ¥å¼‚å¸¸ï¼š${errorMsg}\nè¯·æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦å¯åŠ¨ã€åœ°å€/ç«¯å£æ˜¯å¦æ­£ç¡®`);
            };

            // 5. å…³é”®ä¿®æ”¹ï¼šå…³é—­äº‹ä»¶æ˜¾ç¤ºåŸå› ï¼ˆå¦‚æœåŠ¡å™¨ä¸»åŠ¨å…³é—­ã€ç½‘ç»œæ–­å¼€ç­‰ï¼‰
            websocket.onclose = function(event) {
                let closeReason = "æœªçŸ¥åŸå› ";
                if (event.code === 1000) closeReason = "æ­£å¸¸å…³é—­";
                else if (event.code === 1006) closeReason = "è¿æ¥è¢«æ„å¤–ä¸­æ–­ï¼ˆå¯èƒ½æœåŠ¡å™¨æœªå¯åŠ¨æˆ–ç½‘ç»œé—®é¢˜ï¼‰";
                addLog(`ğŸ”Œ è¿æ¥å·²å…³é—­ï¼š${closeReason}ï¼ˆçŠ¶æ€ç ï¼š${event.code}ï¼‰`, "error");
            };
            function test()
            {
                var username=document.getElementById("username");
                var password=document.getElementById("password");
                websocket.send(username.value);
                websocket.send(password.value);
                username.value="";
                password.value="";
            }
        </script>

    </body>

</html>